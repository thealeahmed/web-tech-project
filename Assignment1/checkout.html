<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f7f7fb; }
    .checkout-title {
      font-weight: 700; font-size: 2.2rem; letter-spacing: .02em;
      padding-bottom: .25em; margin-bottom: 1.5em;
      border-bottom: 3px solid #007bff; width: max-content; margin-left: auto; margin-right: auto;
    }
    .checkout-card {
      padding: 2rem 1.5rem 1.5rem 1.5rem;
      background: #fff;
      box-shadow: 0 6px 24px -4px rgba(70,70,120,0.07),0 1.5px 3px rgba(0,0,0,0.07);
      border-radius: 1rem;
    }
    .order-summary-card{
      background: #fff;
      border: 1.5px solid #dbe4ef;
      border-radius: .8rem;
      box-shadow: 0 1px 8px 0 rgba(40,60,120,0.05);
      padding:1.25rem;
    }
    .order-summary-card h5 { margin-bottom: 1.25rem; }
    .form-label { font-weight: 500; margin-bottom:.1rem; }
    input.form-control.is-invalid, select.form-select.is-invalid { border-color: #dc3545; }
    .invalid-feedback { font-size: 0.98em; }
    .btn-success { font-size: 1.15em; padding: .65em 1em; border-radius: .5em; }
    @media (min-width: 992px) { .order-summary-card {position:sticky;top:2rem;} }
  </style>
</head>
<body class="bg-light">
  <h2 class="checkout-title text-center mb-4">Checkout</h2>
  <div class="row g-4">
    <div class="col-12 col-md-7">
      <div class="checkout-card mb-4">
        <form id="checkoutForm" novalidate>
          <h5 class="mb-3">Shipping Info</h5>
          <div class="form-group mb-3">
            <label for="fullName" class="form-label">Full Name</label>
            <input name="fullName" id="fullName" class="form-control" type="text" placeholder="Full Name" required minlength="3">
            <div class="invalid-feedback">Full name required (at least 3 characters).</div>
          </div>
          <div class="form-group mb-3">
            <label for="email" class="form-label">Email</label>
            <input name="email" id="email" class="form-control" type="email" placeholder="Email" required>
            <div class="invalid-feedback">Please enter a valid email address.</div>
          </div>
          <div class="form-group mb-3">
            <label for="phone" class="form-label">Phone</label>
            <input name="phone" id="phone" class="form-control" type="tel" placeholder="Phone" required minlength="10">
            <div class="invalid-feedback">Enter a valid phone (digits only, 10+).</div>
          </div>
          <div class="form-group mb-3">
            <label for="address" class="form-label">Address</label>
            <input name="address" id="address" class="form-control" type="text" placeholder="Address" required>
            <div class="invalid-feedback">Address required.</div>
          </div>
          <div class="form-group mb-3">
            <label for="city" class="form-label">City</label>
            <input name="city" id="city" class="form-control" type="text" placeholder="City" required>
            <div class="invalid-feedback">City required.</div>
          </div>
          <div class="form-group mb-3">
            <label for="postal" class="form-label">Postal Code</label>
            <input name="postal" id="postal" class="form-control" type="text" placeholder="Postal Code" required>
            <div class="invalid-feedback">Numeric, 4-6 digits.</div>
          </div>
          <div class="form-group mb-3">
            <label for="country" class="form-label">Country</label>
            <select name="country" id="country" class="form-select" required>
              <option value="">Country</option>
              <option>Pakistan</option>
              <option>USA</option>
              <option>Canada</option>
            </select>
            <div class="invalid-feedback">Please select a country.</div>
          </div>
          <div class="form-check mb-3">
            <input name="billingSame" class="form-check-input" type="checkbox" id="billingSame" checked>
            <label class="form-check-label" for="billingSame">Billing same as shipping</label>
          </div>
          <h5 class="mb-3">Payment</h5>
          <div class="form-check mb-2">
            <input class="form-check-input" type="radio" name="payment" id="cardPay" value="card">
            <label class="form-check-label" for="cardPay">Card</label>
          </div>
          <div class="form-check mb-2">
            <input class="form-check-input" type="radio" name="payment" id="codPay" value="cod">
            <label class="form-check-label" for="codPay">Cash on Delivery</label>
          </div>
          <div class="form-check mb-4">
            <input class="form-check-input" type="radio" name="payment" id="walletPay" value="wallet">
            <label class="form-check-label" for="walletPay">Wallet</label>
          </div>
          <div id="cardFields" style="display:none;">
            <div class="form-group mb-2">
              <label for="cardName" class="form-label">Cardholder Name</label>
              <input name="cardName" id="cardName" class="form-control" type="text" placeholder="Cardholder Name">
              <div class="invalid-feedback">Required if using card.</div>
            </div>
            <div class="form-group mb-2">
              <label for="cardNumber" class="form-label">Card Number</label>
              <input name="cardNumber" id="cardNumber" class="form-control" type="text" maxlength="16" placeholder="Card Number">
              <div class="invalid-feedback">16-digit number only.</div>
            </div>
            <div class="form-group mb-2">
              <label for="cardExpiry" class="form-label">Expiry (MM/YY)</label>
              <input name="cardExpiry" id="cardExpiry" class="form-control" type="text" maxlength="5" placeholder="Expiry (MM/YY)">
              <div class="invalid-feedback">Format MM/YY.</div>
            </div>
            <div class="form-group mb-2">
              <label for="cardCVV" class="form-label">CVV</label>
              <input name="cardCVV" id="cardCVV" class="form-control" type="text" maxlength="4" placeholder="CVV">
              <div class="invalid-feedback">3 or 4 digit code.</div>
            </div>
          </div>
          <div class="mt-2 mb-3" id="paymentError" style="display:none;">
            <span class="text-danger">Please select a payment method.</span>
          </div>
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="termsCheck" name="termsCheck">
            <label class="form-check-label" for="termsCheck">Agree to terms</label>
            <div class="invalid-feedback" id="termsError">You must agree to terms.</div>
          </div>
          <button type="submit" class="btn btn-success w-100">Place Order</button>
        </form>
      </div>
    </div>
    <div class="col-12 col-md-5">
      <div class="order-summary-card mb-4">
        <h5>Order Summary</h5>
        <ul class="list-group mb-3">
          <li class="list-group-item d-flex justify-content-between align-items-center">
            Handmade Candle <span>2 × Rs499</span>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            Ceramic Vase <span>1 × Rs899</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            Subtotal <span>Rs1897</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            Shipping <span>Rs75</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            Tax <span>Rs90</span>
          </li>
          <li class="list-group-item d-flex justify-content-between fw-bold">
            Total <span>Rs2062</span>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script>
    
  $(function() {
    function validateField(selector, validator) {
      const el = $(selector);
      const val = el.val().trim();
      const ok = validator(val);
      el.toggleClass('is-invalid', !ok).toggleClass('is-valid', ok);
      if (ok) el.next('.invalid-feedback').hide();
      else el.next('.invalid-feedback').show();
      return ok;
    }
    function showCardFields(show) {
      $('#cardFields').toggle(show);
      if (!show) {
        $('#cardFields input').removeClass('is-invalid is-valid').val('');
      }
    }
    function validateCardFields() {
      var required = $('input[name=payment]:checked').val() === 'card';
      let ok = true;
      if (required) {
        ok = validateField('#cardName', v=>v.length>=3) && ok;
        ok = validateField('#cardNumber', v=>/^\d{16}$/.test(v)) && ok;
        ok = validateField('#cardExpiry', v=>/^\d{2}\/\d{2}$/.test(v)) && ok;
        ok = validateField('#cardCVV', v=>/^\d{3,4}$/.test(v)) && ok;
      }
      return ok;
    }
    function scrollFirstInvalid() {
      const first = $('.is-invalid:visible').first();
      if (first.length) {
        $('html,body').animate({ scrollTop: first.offset().top - 80 }, 400);
      }
    }
    function validateAll() {
      let ok = true;
      ok = validateField('#fullName', v=>v.length>=3) && ok;
      ok = validateField('#email', v=>/^\S+@\S+\.\S+$/.test(v)) && ok;
      ok = validateField('#phone', v=>/^\d{10,}$/.test(v)) && ok;
      ok = validateField('#address', v=>v.length>0) && ok;
      ok = validateField('#city', v=>v.length>0) && ok;
      ok = validateField('#postal', v=>/^\d{4,6}$/.test(v)) && ok;
      ok = validateField('#country', v=>v.length>0) && ok;
      let paymentChecked = $("input[name=payment]:checked").length>0;
      $('#paymentError').toggle(!paymentChecked);
      ok = paymentChecked && ok;
      showCardFields($("input[name=payment]:checked").val()==='card');
      ok = validateCardFields() && ok;
      let termsAgreed = $('#termsCheck').is(':checked');
      $('#termsCheck').toggleClass('is-invalid', !termsAgreed).toggleClass('is-valid', termsAgreed);
      $('#termsError').toggle(!termsAgreed);
      ok = termsAgreed && ok;
      return ok;
    }
    $('#checkoutForm input, #checkoutForm select').on('input change blur', function() {
      validateAll();
    });
    $('input[name=payment]').on('change', function() {
      showCardFields($(this).val()==='card');
      validateAll();
    });
    $('#checkoutForm').on('submit', function(e) {
      if (!validateAll()) {
        e.preventDefault();
        scrollFirstInvalid();
      }
    });
  });
  </script>
</body>
</html>
